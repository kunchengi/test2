<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>钟表</title>
    <style>
        canvas{
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <canvas id="mycanvas" width="400px" height="400px"></canvas>
<script>
    var mycanvas = document.getElementById("mycanvas");
    var ctx = mycanvas.getContext("2d");

    (function play(){
        ctx.clearRect(0,0,mycanvas.width,mycanvas.height);//清除画布
        ctx.save();
        //设置画布中心为0,0点
        ctx.translate(mycanvas.width/2,mycanvas.height/2);
        biaopan();
        run();
        ctx.restore()
        requestAnimationFrame(play);//定时调用
    })()



    //画表盘
    function biaopan(){
    ctx.strokeStyle = "#777";//画笔颜色
    ctx.lineWidth = 6;//线宽
    //绘制表盘
    ctx.beginPath();
    ctx.arc(0,0,150,0,2*Math.PI);//画圆
    ctx.stroke();

    //分针刻度
    ctx.strokeStyle = "#f7f";//刻度颜色
    ctx.lineWidth = 2;
    ctx.beginPath();
    for (var i = 0; i < 60; i++) {
        ctx.moveTo(0,-130);
        ctx.lineTo(0,-140);
        ctx.stroke();
        ctx.rotate(2*Math.PI/60);
    }

    //时针刻度
    ctx.strokeStyle = "#17f";//刻度颜色
    ctx.lineWidth = 6;
    ctx.beginPath();
    for (var i = 0; i < 12; i++) {
        ctx.moveTo(0,-120);
        ctx.lineTo(0,-140);
        ctx.stroke();
        ctx.rotate(2*Math.PI/12);
    }

    //绘制数字
     ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillStyle = "green";
    ctx.font = "16px 微软雅黑";
     for (var i=1;i<13;i++){
         ctx.fillText(i,Math.sin(2*Math.PI/12*i)*100,Math.cos(2*Math.PI/12*i)*-100);
     }
    }

    function run() {
    var d = new Date();
    var h = d.getHours();//获取当前的小时
    var m = d.getMinutes();//分
    var s = d.getSeconds();//秒

    //时针
    ctx.save();//保存
    //秒针走60格子，分针多走一格
    ctx.rotate(2*Math.PI/12*h+(2*Math.PI/60*m+2*Math.PI/60*s/60)/12);
    ctx.strokeStyle = "#a71";
    ctx.lineWidth = 8;
    ctx.beginPath();
    ctx.moveTo(0,18);
    ctx.lineTo(0,-70);
    ctx.stroke();
    ctx.restore();//还原

    //分针
    ctx.save();
    //秒针走60格子，分针多走一格
    ctx.rotate(2*Math.PI/60*m+2*Math.PI/60*s/60);
    ctx.lineWidth = 4;
    ctx.strokeStyle = "#f71";
    ctx.beginPath();
    ctx.moveTo(0,20);
    ctx.lineTo(0,-100);
    ctx.stroke();
    ctx.restore();

    //秒针
    ctx.save();
    ctx.rotate(2*Math.PI/60*s);
    ctx.lineWidth = 2;
    ctx.strokeStyle = "#f00";
    ctx.beginPath();
    ctx.moveTo(0,20);
    ctx.lineTo(0,-110);
    ctx.stroke();
    ctx.restore();


    //中心
    ctx.fillStyle = "#777";
    ctx.beginPath();
    ctx.arc(0,0,10,0,2*Math.PI);
    ctx.fill();
    ctx.strokeStyle = 'yellow';
    ctx.stroke();

    }


</script>
</body>
</html>